<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"><link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5"><link rel="shortcut icon" href="/favicons/favicon.ico"><meta name="msapplication-TileColor" content="#2b5797"><meta name="msapplication-config" content="/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><title>Text Mode | ThingSet</title><meta name="description" content="The Data Accessibility Framework"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.23">
    <link rel="preload" href="/branch/spec-v0.6/assets/js/runtime~app.6626e0db.js" as="script"><link rel="preload" href="/branch/spec-v0.6/assets/css/styles.3cd26e3b.css" as="style"><link rel="preload" href="/branch/spec-v0.6/assets/js/9296.89757b8c.js" as="script"><link rel="preload" href="/branch/spec-v0.6/assets/js/app.1d7736db.js" as="script">
    <link rel="stylesheet" href="/branch/spec-v0.6/assets/css/styles.3cd26e3b.css">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/branch/spec-v0.6/" class=""><img class="logo" src="/branch/spec-v0.6/images/thingset-logo.png" alt="ThingSet"><span class="site-name can-hide">ThingSet</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/spec-v0.6/software/device_library" class="nav-link" aria-label="Device Library"><!--[--><!--]--> Device Library <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/software/sdk" class="nav-link" aria-label="SDK for Zephyr"><!--[--><!--]--> SDK for Zephyr <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/software/app" class="nav-link" aria-label="Mobile App"><!--[--><!--]--> Mobile App <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.6/introduction/abstract" class="nav-link" aria-label="v0.6"><!--[--><!--]--> v0.6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.5/introduction" class="nav-link" aria-label="v0.5"><!--[--><!--]--> v0.5 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.4/introduction" class="nav-link" aria-label="v0.4"><!--[--><!--]--> v0.4 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.3/1a_introduction" class="nav-link" aria-label="v0.3"><!--[--><!--]--> v0.3 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.2/1a_introduction" class="nav-link" aria-label="v0.2"><!--[--><!--]--> v0.2 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.1/" class="nav-link" aria-label="v0.1"><!--[--><!--]--> v0.1 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/changelog" class="nav-link" aria-label="Changelog"><!--[--><!--]--> Changelog <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/spec-v0.6/software/device_library" class="nav-link" aria-label="Device Library"><!--[--><!--]--> Device Library <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/software/sdk" class="nav-link" aria-label="SDK for Zephyr"><!--[--><!--]--> SDK for Zephyr <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/software/app" class="nav-link" aria-label="Mobile App"><!--[--><!--]--> Mobile App <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.6/introduction/abstract" class="nav-link" aria-label="v0.6"><!--[--><!--]--> v0.6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.5/introduction" class="nav-link" aria-label="v0.5"><!--[--><!--]--> v0.5 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.4/introduction" class="nav-link" aria-label="v0.4"><!--[--><!--]--> v0.4 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.3/1a_introduction" class="nav-link" aria-label="v0.3"><!--[--><!--]--> v0.3 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.2/1a_introduction" class="nav-link" aria-label="v0.2"><!--[--><!--]--> v0.2 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/v0.1/" class="nav-link" aria-label="v0.1"><!--[--><!--]--> v0.1 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/spec-v0.6/spec/changelog" class="nav-link" aria-label="Changelog"><!--[--><!--]--> Changelog <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">Introduction</p><ul class=""><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/introduction/abstract.html" class="nav-link sidebar-item" aria-label="Abstract"><!--[--><!--]--> Abstract <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/introduction/objectives.html" class="nav-link sidebar-item" aria-label="Objectives"><!--[--><!--]--> Objectives <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/introduction/terminology.html" class="nav-link sidebar-item" aria-label="Terminology"><!--[--><!--]--> Terminology <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Data Model</p><ul class=""><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/data_model/structure.html" class="nav-link sidebar-item" aria-label="Structure"><!--[--><!--]--> Structure <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/data_model/overlays.html" class="nav-link sidebar-item" aria-label="Overlays"><!--[--><!--]--> Overlays <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">Protocol</p><ul class=""><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/protocol/connectivity.html" class="nav-link sidebar-item" aria-label="Connectivity"><!--[--><!--]--> Connectivity <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/protocol/functions.html" class="nav-link sidebar-item" aria-label="Access Functions"><!--[--><!--]--> Access Functions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/spec-v0.6/spec/v0.6/protocol/text_mode.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Text Mode"><!--[--><!--]--> Text Mode <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/branch/spec-v0.6/spec/v0.6/protocol/text_mode.html#overview" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/spec-v0.6/spec/v0.6/protocol/text_mode.html#read-data" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Read data"><!--[--><!--]--> Read data <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/spec-v0.6/spec/v0.6/protocol/text_mode.html#update-data" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Update data"><!--[--><!--]--> Update data <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/spec-v0.6/spec/v0.6/protocol/text_mode.html#create-data" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Create data"><!--[--><!--]--> Create data <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/spec-v0.6/spec/v0.6/protocol/text_mode.html#delete-data" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Delete data"><!--[--><!--]--> Delete data <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/spec-v0.6/spec/v0.6/protocol/text_mode.html#execute-function" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Execute function"><!--[--><!--]--> Execute function <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/spec-v0.6/spec/v0.6/protocol/text_mode.html#authentication" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Authentication"><!--[--><!--]--> Authentication <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/spec-v0.6/spec/v0.6/protocol/text_mode.html#reporting" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Reporting"><!--[--><!--]--> Reporting <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/protocol/binary_mode.html" class="nav-link sidebar-item" aria-label="Binary Mode"><!--[--><!--]--> Binary Mode <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Transports</p><ul class=""><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/transports/serial.html" class="nav-link sidebar-item" aria-label="Serial"><!--[--><!--]--> Serial <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/transports/websocket.html" class="nav-link sidebar-item" aria-label="WebSocket"><!--[--><!--]--> WebSocket <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/transports/can.html" class="nav-link sidebar-item" aria-label="CAN"><!--[--><!--]--> CAN <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/transports/bluetooth.html" class="nav-link sidebar-item" aria-label="BLE"><!--[--><!--]--> BLE <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Mappings</p><ul class=""><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/mappings/mqtt.html" class="nav-link sidebar-item" aria-label="MQTT"><!--[--><!--]--> MQTT <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/mappings/coap.html" class="nav-link sidebar-item" aria-label="CoAP"><!--[--><!--]--> CoAP <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/mappings/lorawan.html" class="nav-link sidebar-item" aria-label="LoRaWAN"><!--[--><!--]--> LoRaWAN <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Annex</p><ul class=""><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/annex/a_existing_solutions.html" class="nav-link sidebar-item" aria-label="Annex A: Existing Solutions"><!--[--><!--]--> Annex A: Existing Solutions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/spec-v0.6/spec/v0.6/annex/b_tools.html" class="nav-link sidebar-item" aria-label="Annex B: Tools"><!--[--><!--]--> Annex B: Tools <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="text-mode" tabindex="-1"><a class="header-anchor" href="#text-mode" aria-hidden="true">#</a> Text Mode</h1><h2 id="overview" tabindex="-1"><a class="header-anchor" href="#overview" aria-hidden="true">#</a> Overview</h2><p>The following description of the ThingSet text mode grammar uses ABNF according to <a href="https://tools.ietf.org/html/rfc5234" target="_blank" rel="noopener noreferrer">RFC 5234<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><p>For rule names prefixed with <code>json-</code> consider the JSON specification in <a href="https://tools.ietf.org/html/rfc8259" target="_blank" rel="noopener noreferrer">RFC 8259<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>. In context of the ThingSet protocol, JSON data must be in the most compact form, i.e. not contain any unnecessary whitespaces or line breaks.</p><h3 id="requests" tabindex="-1"><a class="header-anchor" href="#requests" aria-hidden="true">#</a> Requests</h3><p>Each request message consists of a first character as the request method identifier, a path specifying the endpoint of the request and a JSON string for the payload data (if applicable).</p><pre><code>txt-request = txt-get / txt-fetch / txt-update / txt-create / txt-delete / txt-exec

txt-get    = &quot;?&quot; path

txt-fetch  = &quot;?&quot; path &quot; &quot; ( json-array / json-null )

txt-update = &quot;=&quot; path &quot; &quot; json-object

txt-create = &quot;+&quot; path &quot; &quot; json-value

txt-delete = &quot;-&quot; path [ &quot; &quot; json-value ]

txt-exec   = &quot;!&quot; path [ &quot; &quot; json-array ]

path = relative-path / absolute-path / &quot;&quot;

relative-path = object-name *( &quot;/&quot; object-name )

absolute-path = &quot;/&quot; [ node-id [ &quot;/&quot; relative-path ] ]

node-id = 1*( ALPHA / DIGIT )                   ; alphanumeric string

object-name = ALPHA / DIGIT / &quot;.&quot; / &quot;_&quot; / &quot;-&quot;   ; compatible to URIs (RFC 3986)
</code></pre><p>The path to access a specific data object is a JSON pointer (<a href="https://tools.ietf.org/html/rfc6901" target="_blank" rel="noopener noreferrer">RFC 6901<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>). For relative paths the forward slash at the beginning is omitted. The useable characters for object names are further restricted to allow un-escaped usage in URLs.</p><h3 id="response" tabindex="-1"><a class="header-anchor" href="#response" aria-hidden="true">#</a> Response</h3><p>The response starts with a colon <code>:</code> followed by the the status code. If communicating through a gateway, the node ID can be added immediately after the status code and a <code>/</code>. This is required for gateways to map responses from different nodes to the correct request.</p><p>The <code>json-value</code> contains the requested data (if any). For error responses, it can be a string with a detailed explanation of the error to help debugging the problem, similar to <a href="https://www.rfc-editor.org/rfc/rfc7252#section-5.5.2" target="_blank" rel="noopener noreferrer">CoAP diagnostic payload<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><pre><code>txt-response = &quot;:&quot; status-code [ &quot;/&quot; [ node-id ] ] [ &quot; &quot; json-value ]

status-code = 2( DIGIT / %x41-46 )              ; two upper-case HEXDIGs
</code></pre><h3 id="report" tabindex="-1"><a class="header-anchor" href="#report" aria-hidden="true">#</a> Report</h3><p>A report starts with the hash sign and a path, followed by a whitespace and the map of actual payload data as name/value pairs.</p><pre><code>txt-report = &quot;#&quot; path &quot; &quot; json-object
</code></pre><p>The path is either a group (e.g. <code>Device</code>) or a subset object containing references to other data items as an array (e.g. <code>mLive_</code>).</p><h3 id="desire" tabindex="-1"><a class="header-anchor" href="#desire" aria-hidden="true">#</a> Desire</h3><p>A desire starts with the at sign and a path, followed by a whitespace and the map of desired changes as name/value pairs.</p><pre><code>txt-desire = &quot;@&quot; path &quot; &quot; json-object
</code></pre><p>A desire is the same as an update request, just that no response is expected and data items not found are silently ignored.</p><h3 id="absolute-vs-relative-paths" tabindex="-1"><a class="header-anchor" href="#absolute-vs-relative-paths" aria-hidden="true">#</a> Absolute vs. relative paths</h3><p>If the path in requests and reports starts with a <code>/</code>, the path is absolute, which means that the first element in the path identifies the node ID. This is used by gateways or in general by services which can communicate with multiple ThingSet nodes.</p><h2 id="read-data" tabindex="-1"><a class="header-anchor" href="#read-data" aria-hidden="true">#</a> Read data</h2><p>The GET function allows to read all child objects below the specified path.</p><p>If a device is not able to provide the entire content of a group or subset (e.g. because the buffer is too small), the value must be set to <code>null</code> and a new request for smaller data set should be sent. In case of records, the value must be set to the number of records instead of <code>null</code> if the content of the records cannot be returned directly. This allows to determine whether the path starting with an upper-case letter is a group or contains records.</p><p>The FETCH function allows to retrieve only subset of the child objects, defined by an array with the object names passed to the function. If <code>null</code> is passed instead of the array of desired child objects, an array with the child object names is returned to allow discovering a device data structure layer by layer.</p><p>Only those data objects are returned which are at least readable. Thus, the result might differ after authentication.</p><p><strong>Example 1:</strong> Attempt to get all data of the device</p><pre><code>?
:85 {&quot;t_s&quot;:460677600,&quot;pNodeID&quot;:&quot;DEADC0DEBAADCODE&quot;,&quot;cMetadataURL&quot;:&quot;https://files.
libre.solar/meta/cc-05.json&quot;,&quot;Device&quot;:null,&quot;Bat&quot;:null,&quot;Solar&quot;:null,&quot;Load&quot;:null,
&quot;ErrorMemory_100&quot;:2,&quot;Log&quot;:null,&quot;eError&quot;:null,&quot;mLive_&quot;:null,&quot;_Reporting&quot;:null}
</code></pre><p>The content of the groups and subsets would have resulted in a too long response for the resource-constrained device, so the values were set to <code>null</code> and can be retrieved separately as shown in the examples below.</p><p>Note that <code>_Ids</code> and <code>_Paths</code> are not contained in the data, as they are only available in the binary mode.</p><p><strong>Example 2:</strong> Retrieve all content of <code>Bat</code> path (names + values)</p><pre><code>?Bat
:85 {&quot;rVoltage_V&quot;:12.9,&quot;rCurrent_A&quot;:-3.14,&quot;sTargetVoltage_V&quot;:14.4}
</code></pre><p><strong>Example 3:</strong> List all sub-item names of <code>Bat</code> path as an array</p><pre><code>?Bat null
:85 [&quot;rVoltage_V&quot;,&quot;rCurrent_A&quot;,&quot;sTargetVoltage_V&quot;]
</code></pre><p><strong>Example 4:</strong> Retrieve value for single data item <code>Bat/rVoltage_V</code></p><pre><code>?Bat [&quot;rVoltage_V&quot;]
:85 [12.9]
</code></pre><p>A more simple way is to provide the entire path (GET instead of FETCH request):</p><pre><code>?Bat/rVoltage_V
:85 12.9
</code></pre><p><strong>Example 5:</strong> Retrieve all records in <code>ErrorMemory_100</code></p><pre><code>?ErrorMemory_100
:85 [{&quot;t_s&quot;:460677000,&quot;rErrorFlags&quot;:4},{&quot;t_s&quot;:460671000,&quot;rErrorFlags&quot;:256}]
</code></pre><p>If a device is not able to return the content of all records directly, it must return the number of stored records. This number can be used to retrieve each record individually (see below).</p><pre><code>?ErrorMemory_100
:85 2
</code></pre><p><strong>Example 6:</strong> Retrieve first record in <code>ErrorMemory_100</code></p><pre><code>?ErrorMemory_100/0
:85 {&quot;t_s&quot;:460677000,&quot;rErrorFlags&quot;:4}
</code></pre><p><strong>Example 7:</strong> Get all data of node <code>DEADC0DEBAADCODE</code> through a gateway</p><pre><code>?/DEADC0DEBAADCODE
:85/DEADC0DEBAADCODE {&quot;t_s&quot;:460677600,&quot;pNodeID&quot;:&quot;DEADC0DEBAADCODE&quot;,&quot;cMetadataURL&quot;:
&quot;https://files.libre.solar/meta/cc-05.json&quot;,&quot;Device&quot;:null,&quot;Bat&quot;:null,&quot;Solar&quot;:null,
&quot;Load&quot;:null,&quot;ErrorMemory_100&quot;:2,&quot;Log&quot;:null,&quot;eError&quot;:null,&quot;mLive_&quot;:null,&quot;_Reporting&quot;:
null}
</code></pre><p><strong>Example 8:</strong> List all nodes behind the gateway we are communicating with</p><pre><code>?/ null
:85/ [&quot;C001CAFE01234567&quot;,&quot;DEADC0DEBAADCODE&quot;]
</code></pre><p>If the node is not a gateway, requests with with absolute paths (starting with <code>?/</code>) are answered with error code <code>C5</code>.</p><pre><code>?/ null
:C5
</code></pre><p>To access the gateway node itself, use a relative path. The list command ?/ MUST show all downstream nodes including the gateway node (if it&#39;s not a simple forwarding gateway that does not have own state).</p><h2 id="update-data" tabindex="-1"><a class="header-anchor" href="#update-data" aria-hidden="true">#</a> Update data</h2><p>The UPDATE request attempts to overwrite the values of data items.</p><p>Data items prefixed with <code>s</code> will be stored in persistent memory, so it is not allowed to change settings periodically. Only data of with <code>w</code> prefix can be changed regularly.</p><p>Responses only contain payload if the requested update was valid, but could not be applied exactly as requested, e.g. if a setting value had to be rounded to the next feasible value. In this case, the response repeats all requested data with actually applied values. This guarantees that a client or cloud backend always knows the actual values used by the node.</p><p><strong>Example 1:</strong> Disable load output</p><pre><code>=Load {&quot;wEnable&quot;:false}
:84
</code></pre><p><strong>Example 2:</strong> Attempt to write read-only measurement value (response with optional diagnostic payload)</p><pre><code>=Bat {&quot;rCurrent_A&quot;:0}
:A3 &quot;Item is read-only&quot;
</code></pre><p><strong>Example 3:</strong> Write value with higher precision than supported by the device</p><pre><code>=Bat {&quot;sTargetVoltage_V&quot;:14.123}
:84 {&quot;sTargetVoltage_V&quot;:14.1}
</code></pre><h2 id="create-data" tabindex="-1"><a class="header-anchor" href="#create-data" aria-hidden="true">#</a> Create data</h2><p>The equivalent of a POST request allows to append new data to an existing data item, usually an array or a subset.</p><p>In current implementations it is not possible to add entirely new data objects, as this would be against the nature of statically allocated memory of constrained devices.</p><p><strong>Example 1:</strong> Add battery current measurement to the live metrics subset <code>mLive_</code></p><pre><code>+mLive_ &quot;Bat/rCurrent_A&quot;
:81
</code></pre><p><strong>Example 2:</strong> Attempt to add <code>Solar/rState</code> to read-only error events subset <code>eError</code></p><pre><code>+eError &quot;Solar/rState&quot;
:A3 &quot;Item is read-only&quot;
</code></pre><h2 id="delete-data" tabindex="-1"><a class="header-anchor" href="#delete-data" aria-hidden="true">#</a> Delete data</h2><p>Deletes data from a subset or a data item of array type.</p><p><strong>Example 1:</strong> Delete <code>Load/rPower_W</code> from live metrics subset <code>mLive_</code></p><pre><code>-mLive_ &quot;Load/rPower_W&quot;
:82
</code></pre><h2 id="execute-function" tabindex="-1"><a class="header-anchor" href="#execute-function" aria-hidden="true">#</a> Execute function</h2><p>Calls an executable data object. Functions are prefixed with <code>x</code>.</p><p><strong>Example 1:</strong> Reset the device</p><pre><code>!Device/xReset
:84
</code></pre><h2 id="authentication" tabindex="-1"><a class="header-anchor" href="#authentication" aria-hidden="true">#</a> Authentication</h2><p>Some of the device parameters like calibration data or important settings should be protected against unauthorized change. A simple authentication method is suggested where multiple user levels can be implemented in the firmware using different passwords. The manufacturer would use a different password to authenticate than a normal user and thus get more rights to access data objects.</p><p>The password is transferred as a plain text string. Encryption has to be provided by lower layers.</p><p>Internally, the authentication function is implemented as an executable data object.</p><pre><code>!Device/xAuth &quot;mypass&quot;
:84
</code></pre><p>After successful authentication, the device exposes previously restricted data objects via the normal data access requests. The authentication stays valid until another auth command is received, either without password or with a password that doesn&#39;t match.</p><h2 id="reporting" tabindex="-1"><a class="header-anchor" href="#reporting" aria-hidden="true">#</a> Reporting</h2><p>Reports broadcast to all connected nodes and no response is sent from nodes receiving the message.</p><p><strong>Example 1:</strong> A report containing the <code>mLive_</code> subset, sent out by the node every 10 seconds</p><pre><code>#mLive_ {&quot;t_s&quot;:460677600,&quot;Bat&quot;:{&quot;rVoltage_V&quot;:12.9,&quot;rCurrent_A&quot;:-3.14},&quot;Solar&quot;:{&quot;rPower_W&quot;:96.5},&quot;Load&quot;:{&quot;rPower_W&quot;:137.0}}
</code></pre><p>The <code>_Reporting</code> path is used to configure the publication process itself.</p><p><strong>Example 2:</strong> List groups and subsets available for publication</p><pre><code>?_Reporting null
:85 [&quot;Log&quot;,&quot;eError&quot;,&quot;mLive_&quot;]
</code></pre><p><strong>Example 3:</strong> Enable publication of <code>mLive_</code> subset</p><pre><code>=_Reporting/mLive_ {&quot;sEnable&quot;:true}
:84
</code></pre><p>If the published object is a subset object (and not a group), the data items contained in the messages can be configured using CREATE and DELETE requests to the data object as shown in the examples above.</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/ThingSet/thingset.github.io/edit/spec-v0.6/docs/spec/v0.6/protocol/text_mode.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">6/8/2023, 8:36:34 AM</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/branch/spec-v0.6/spec/v0.6/protocol/functions.html" class="nav-link" aria-label="Access Functions"><!--[--><!--]--> Access Functions <!--[--><!--]--></a></span><span class="next"><a href="/branch/spec-v0.6/spec/v0.6/protocol/binary_mode.html" class="nav-link" aria-label="Binary Mode"><!--[--><!--]--> Binary Mode <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><div class="footer"><span style="padding:5px;"><a href="https://github.com/ThingSet"><img src="/images/github-logo.svg" height="14"> GitHub</a></span> | <span style="padding:5px;">Developed by Libre Solar Technologies GmbH</span> | <span style="padding:5px;"><a href="/contact.html">Contact / Impressum</a></span></div><!--]--><!----><!--]--></div>
    <script src="/branch/spec-v0.6/assets/js/runtime~app.6626e0db.js" defer></script><script src="/branch/spec-v0.6/assets/js/9296.89757b8c.js" defer></script><script src="/branch/spec-v0.6/assets/js/app.1d7736db.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Existing Standards | ThingSet Protocol Specification</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" sizes="180x180" href="/thingset/branch/quickfix-example-4/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/thingset/branch/quickfix-example-4/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/thingset/branch/quickfix-example-4/favicons/favicon-16x16.png">
    <link rel="manifest" href="/thingset/branch/quickfix-example-4/favicons/site.webmanifest">
    <link rel="mask-icon" href="/thingset/branch/quickfix-example-4/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/thingset/branch/quickfix-example-4/favicons/favicon.ico">
    <meta name="description" content="The ThingSet protocol provides a consistent, standardized way to configure, monitor and control ressource-constrained devices via different communication interfaces like Serial, LoRa, USB, Bluetooth or CAN.">
    <meta name="msapplication-TileColor" content="#2b5797">
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/thingset/branch/quickfix-example-4/assets/css/0.styles.b182d6b0.css" as="style"><link rel="preload" href="/thingset/branch/quickfix-example-4/assets/js/app.e82a7297.js" as="script"><link rel="preload" href="/thingset/branch/quickfix-example-4/assets/js/2.f8dcb625.js" as="script"><link rel="preload" href="/thingset/branch/quickfix-example-4/assets/js/3.37d47788.js" as="script"><link rel="preload" href="/thingset/branch/quickfix-example-4/assets/js/15.2f0b203a.js" as="script"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/10.bec7f89e.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/11.4eeabb36.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/12.df21bce6.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/13.c183f414.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/14.b52ab5a7.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/16.3e711864.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/17.e7f4c269.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/18.f7132805.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/19.282eb6e5.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/20.fde02dae.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/21.0f4c9a5d.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/22.f407caf7.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/23.ef381cff.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/24.06bf6126.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/25.bfe5c9a8.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/26.9153cb6a.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/27.be77b6b6.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/28.9be914e5.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/29.9e7fa9c1.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/4.6408cc72.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/5.3e012dac.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/6.63efe20a.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/7.e9fa7449.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/8.3ff5aa83.js"><link rel="prefetch" href="/thingset/branch/quickfix-example-4/assets/js/9.ac70af2f.js">
    <link rel="stylesheet" href="/thingset/branch/quickfix-example-4/assets/css/0.styles.b182d6b0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/thingset/branch/quickfix-example-4/" class="home-link router-link-active"><img src="/thingset/branch/quickfix-example-4/favicons/apple-touch-icon.png" alt="ThingSet Protocol Specification" class="logo"> <span class="site-name">ThingSet Protocol Specification</span></a> <div class="links"><div class="search-box can-hide"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="History Menu" class="dropdown-title"><span class="title">History</span> <span class="arrow down"></span></button> <button type="button" aria-label="History Menu" class="mobile-dropdown-title"><span class="title">History</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/thingset/branch/quickfix-example-4/" class="nav-link">
  v0.3
</a></li><li class="dropdown-item"><!----> <a href="/thingset/branch/quickfix-example-4/v0.2/" class="nav-link">
  v0.2
</a></li><li class="dropdown-item"><!----> <a href="/thingset/branch/quickfix-example-4/v0.1/" class="nav-link">
  v0.1
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="History Menu" class="dropdown-title"><span class="title">History</span> <span class="arrow down"></span></button> <button type="button" aria-label="History Menu" class="mobile-dropdown-title"><span class="title">History</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/thingset/branch/quickfix-example-4/" class="nav-link">
  v0.3
</a></li><li class="dropdown-item"><!----> <a href="/thingset/branch/quickfix-example-4/v0.2/" class="nav-link">
  v0.2
</a></li><li class="dropdown-item"><!----> <a href="/thingset/branch/quickfix-example-4/v0.1/" class="nav-link">
  v0.1
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Why ThingSet?</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/thingset/branch/quickfix-example-4/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/thingset/branch/quickfix-example-4/1b_existing_solutions.html" aria-current="page" class="active sidebar-link">Existing Standards</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/thingset/branch/quickfix-example-4/1b_existing_solutions.html#protocols" class="sidebar-link">Protocols</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Application Layer</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/thingset/branch/quickfix-example-4/2a_general.html" class="sidebar-link">General Concept</a></li><li><a href="/thingset/branch/quickfix-example-4/2b_text_mode.html" class="sidebar-link">Text Mode</a></li><li><a href="/thingset/branch/quickfix-example-4/2c_binary_mode.html" class="sidebar-link">Binary Mode</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Lower Layers</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/thingset/branch/quickfix-example-4/3a_serial.html" class="sidebar-link">Serial</a></li><li><a href="/thingset/branch/quickfix-example-4/3b_can.html" class="sidebar-link">CAN</a></li><li><a href="/thingset/branch/quickfix-example-4/3c_lora.html" class="sidebar-link">LoRa</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Protocol Mapping</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/thingset/branch/quickfix-example-4/4a_http.html" class="sidebar-link">HTTP</a></li><li><a href="/thingset/branch/quickfix-example-4/4b_coap.html" class="sidebar-link">CoAP</a></li><li><a href="/thingset/branch/quickfix-example-4/4c_mqtt.html" class="sidebar-link">MQTT</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="existing-standards"><a href="#existing-standards" class="header-anchor">#</a> Existing Standards</h1> <p>In order to not re-invent the wheel, existing standards were investigated prior to the development of the ThingSet specification.</p> <p>This chapter gives an overview about the advantages and disadvantages of existing solutions. If you just want to know how ThingSet works, you can move on to the next chapter.</p> <p>As the ThingSet protocol was originally developed for energy management based on CAN communication, below analysis covers this aspect in more detail.</p> <h2 id="protocols"><a href="#protocols" class="header-anchor">#</a> Protocols</h2> <h3 id="modbus"><a href="#modbus" class="header-anchor">#</a> Modbus</h3> <p>Modbus RTU and Modbus TCP are quite old, quasi-standard protocols to read and write registers of a device. Modbus requires knowledge of the accessible register addresses and the data format. A method to discover available settings and measurement values is not possible, so it does not fulfill the requirement to be self-describing.</p> <h3 id="firmata"><a href="#firmata" class="header-anchor">#</a> Firmata</h3> <p>In the Arduino community, a protocol called <a href="http://firmata.org/wiki/Main_Page" target="_blank" rel="noopener noreferrer">Firmata<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is very popular to control Arduino devices directly via the serial interface. The protocol based on the MIDI protocol and very compact. However, the approach is very Arduino-specific and targets to remote-control as many Arduino features as possible. ThingSet aims to be a more general purpose solution.</p> <h3 id="canopen-and-energybus"><a href="#canopen-and-energybus" class="header-anchor">#</a> CANopen and EnergyBus</h3> <p>CANopen is developed by CAN in Automation (CiA). This high level protocol uses CAN as physical layer and adds profile specifications, standardized communication protocol and advanced error handling to the core functionality of CAN. Despite the word &quot;open&quot; in the name, only the basic device profile specifications are open accessible. A paid CiA membership is necessary to access all specifications. Unfortunately, the EnergyBus profiles (CiA 454) for a CAN based energy management system are not provided with free access.</p> <p>CiA DS301 specifies the basic communication functionalities of the CANopen application layer.</p> <p>Every device (called CANopen node) must have an object dictionary (OD). This is a large table stored in the node which contains all kinds of data, including device parameters, measurement or control data. In addition to that, it stores also data necessary for communication e.g. which datatypes are used or how a message can be transported (broadcast, handshake, ..).</p> <p>There are two different types of telegrams:</p> <ul><li><p>Service Data Objects (SDOs): These are only used to access the OD. When a device receives an SDO it changes the values of parameters or other OD table entries. The communication is based on a Client/Server relationship. A client initiates an SDO communication, the server then changes its OD according to the client's instruction and sends a response. The client is typically a master device or an operator who supervises and configures the entire network.</p></li> <li><p>Process Data Objects (PDOs): The majority of messages in the bus contain process information like measurement data, control data, status data, etc. The data is read from the OD and transmitted as a PDO, which is basically a pure CAN telegram without protocol overhead. The CAN-identifier of a PDO telegram does not only contain the node-ID of a device (like this is the case in &quot;pure CAN&quot;) but also what kind of content is delivered by the telegram.</p></li></ul> <p>The PDO telegrams are not predefined, but they are configured separately for each network. For each device, four Receive-PDOs (RPDOs) and four Transmit-PDOs (TPDOs) can be defined. For example, the actual current of the battery could be sent as a TPDO by the battery management system and an received as RPDO in a charge controller.</p> <p>The connection channels between different devices for PDO exchange are defined using a PDO mapping procedure. This has the advantage that the process data exchange between different devices can be very flexible. However, it makes an initial network setup necessary. If a device is added to the network, it has to be shut down, some PDO mappings have to be defined and afterwards the network is put into operation mode again. This contradicts to the requirement of a plug-and-play capable energy system.</p> <p>An intelligent master device implementing the network management (NMT) features could be used instead of manual configuration. But also a master device is not beneficial for a distributed, fail-safe energy system.</p> <p>Summary of issues:</p> <ul><li>Pre-defined frame layout defined in not completely open specification</li> <li>Complicated network setup (normally done using proprietary tools)</li> <li>Not intended for master-less operation</li> <li>Only 4 RPDOs and TPDOs possible per node ID for control functions</li></ul> <h3 id="sae-j1939-rv-c-nmea2000-isobus"><a href="#sae-j1939-rv-c-nmea2000-isobus" class="header-anchor">#</a> SAE J1939 / RV-C / NMEA2000 / ISOBUS</h3> <p>The collection of SAE J1939 standards describe a well-established CAN application layer protocol. Several other protocols like RV-C (recreational vehicles), NMEA2000 (marine applications) and ISOBUS (agriculture machines) are based on SAE J1939.</p> <p>Unfortunately, all SAE J1939 based standards (including the base standard itself) are proprietary and not puplic. Only RV-C is available for download.</p> <p>SAE J1939 uses only the extended format CAN id with 29 bits and encodes message priority, source ID, destination ID and the type of message (Parameter Group Number, PGN) inside the CAN ID.</p> <p>In general, SAE J1939 is based on fixed (specified) layout of the data fields in the CAN frame, depending on the PGN.</p> <p>In addition, the protocol is not designed for configuration of parameters. Writing parameters to a device can be achieved only by specifying special PGNs. In contrast to CANopen, parameters cannot be read or written by default.</p> <h3 id="xcp-universal-measurement-and-calibration-protocol"><a href="#xcp-universal-measurement-and-calibration-protocol" class="header-anchor">#</a> XCP (Universal Measurement and Calibration Protocol)</h3> <p>XCP is an established protocol for ECU (Engine Control Unit) development in the automotive industry. It is not limited to CAN as a low level interface, but CAN is probably the most commonly used lower layer.</p> <p>Measurement data and calibration parameters are accessed directly via registers in the microcontroller. Thus, the register values and description has to be generated during linking of the binary code. The register description is typically saved in a .A2L file.</p> <p>For an agile open source based development, the toolchain for generating the A2L file is considered too complicated. In addition to that, tools for XCP and A2L are mostly proprietary and expensive.</p> <p>XCP is also not useable for a master-less control of devices in a system, as this was not a purpose of the protocol.</p> <p>However, XCP offers a well-suited way for firmware upgrades of devices. This feature might be adapted in a future version of this specification.</p> <h3 id="uavcan"><a href="#uavcan" class="header-anchor">#</a> UAVCAN</h3> <p><a href="http://uavcan.org/" target="_blank" rel="noopener noreferrer">UAVCAN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a modern and lightweight protocol based on CAN, also targeting a master-less network. Main applications include aerospace and robotic applications.</p> <p>The protocol is fully open, well-designed and easy to be implemented. However, it also uses pre-defined messages for the communication between devices.</p> <p>The node ID assignment process is more complicated compared to SAE J1939.</p> <p>Some aspects of the UAVCAN protocol might be adapted in the CAN lower layer of this specification.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/13/2020, 9:22:38 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/thingset/branch/quickfix-example-4/" class="prev router-link-active">
        Introduction
      </a></span> <span class="next"><a href="/thingset/branch/quickfix-example-4/2a_general.html">
        General Concept
      </a>
      →
    </span></p></div>  <div class="footer">
    Content provided by <a href="https://libre.solar">Libre Solar</a> under <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode">CC-BY-SA 4.0 License</a> | <a href="https://libre.solar/about/contact/">Contact / Impressum</a></div></main></div><div class="global-ui"></div></div>
    <script src="/thingset/branch/quickfix-example-4/assets/js/app.e82a7297.js" defer></script><script src="/thingset/branch/quickfix-example-4/assets/js/2.f8dcb625.js" defer></script><script src="/thingset/branch/quickfix-example-4/assets/js/3.37d47788.js" defer></script><script src="/thingset/branch/quickfix-example-4/assets/js/15.2f0b203a.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"><link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5"><link rel="shortcut icon" href="/favicons/favicon.ico"><meta name="msapplication-TileColor" content="#2b5797"><meta name="msapplication-config" content="/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><title>Binary Mode | ThingSet</title><meta name="description" content="The Data Accessibility Framework"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.23">
    <link rel="preload" href="/branch/can-multi-frame-report-rework/assets/js/runtime~app.a8fe06e0.js" as="script"><link rel="preload" href="/branch/can-multi-frame-report-rework/assets/css/styles.5559c2b6.css" as="style"><link rel="preload" href="/branch/can-multi-frame-report-rework/assets/js/9296.89757b8c.js" as="script"><link rel="preload" href="/branch/can-multi-frame-report-rework/assets/js/app.0d5cf58c.js" as="script">
    <link rel="stylesheet" href="/branch/can-multi-frame-report-rework/assets/css/styles.5559c2b6.css">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/branch/can-multi-frame-report-rework/" class=""><img class="logo" src="/branch/can-multi-frame-report-rework/images/thingset-logo.png" alt="ThingSet"><span class="site-name can-hide">ThingSet</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/software/node_library" class="nav-link" aria-label="Node Library"><!--[--><!--]--> Node Library <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/software/zephyr_sdk" class="nav-link" aria-label="SDK for Zephyr"><!--[--><!--]--> SDK for Zephyr <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/software/app" class="nav-link" aria-label="Mobile App"><!--[--><!--]--> Mobile App <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.6/introduction/abstract" class="nav-link" aria-label="v0.6"><!--[--><!--]--> v0.6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.5/introduction" class="nav-link" aria-label="v0.5"><!--[--><!--]--> v0.5 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.4/introduction" class="nav-link" aria-label="v0.4"><!--[--><!--]--> v0.4 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.3/1a_introduction" class="nav-link" aria-label="v0.3"><!--[--><!--]--> v0.3 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.2/1a_introduction" class="nav-link" aria-label="v0.2"><!--[--><!--]--> v0.2 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.1/" class="nav-link" aria-label="v0.1"><!--[--><!--]--> v0.1 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/changelog" class="nav-link" aria-label="Changelog"><!--[--><!--]--> Changelog <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/software/node_library" class="nav-link" aria-label="Node Library"><!--[--><!--]--> Node Library <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/software/zephyr_sdk" class="nav-link" aria-label="SDK for Zephyr"><!--[--><!--]--> SDK for Zephyr <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/software/app" class="nav-link" aria-label="Mobile App"><!--[--><!--]--> Mobile App <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.6/introduction/abstract" class="nav-link" aria-label="v0.6"><!--[--><!--]--> v0.6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.5/introduction" class="nav-link" aria-label="v0.5"><!--[--><!--]--> v0.5 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.4/introduction" class="nav-link" aria-label="v0.4"><!--[--><!--]--> v0.4 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.3/1a_introduction" class="nav-link" aria-label="v0.3"><!--[--><!--]--> v0.3 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.2/1a_introduction" class="nav-link" aria-label="v0.2"><!--[--><!--]--> v0.2 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/v0.1/" class="nav-link" aria-label="v0.1"><!--[--><!--]--> v0.1 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-multi-frame-report-rework/spec/changelog" class="nav-link" aria-label="Changelog"><!--[--><!--]--> Changelog <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">Introduction</p><ul class=""><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/introduction/abstract.html" class="nav-link sidebar-item" aria-label="Abstract"><!--[--><!--]--> Abstract <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/introduction/objectives.html" class="nav-link sidebar-item" aria-label="Objectives"><!--[--><!--]--> Objectives <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/introduction/terminology.html" class="nav-link sidebar-item" aria-label="Terminology"><!--[--><!--]--> Terminology <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Data Model</p><ul class=""><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/data_model/structure.html" class="nav-link sidebar-item" aria-label="Structure"><!--[--><!--]--> Structure <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/data_model/overlays.html" class="nav-link sidebar-item" aria-label="Overlays"><!--[--><!--]--> Overlays <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">Protocol</p><ul class=""><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/connectivity.html" class="nav-link sidebar-item" aria-label="Connectivity"><!--[--><!--]--> Connectivity <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/functions.html" class="nav-link sidebar-item" aria-label="Access Functions"><!--[--><!--]--> Access Functions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/text_mode.html" class="nav-link sidebar-item" aria-label="Text Mode"><!--[--><!--]--> Text Mode <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/binary_mode.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Binary Mode"><!--[--><!--]--> Binary Mode <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/binary_mode.html#overview" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/binary_mode.html#name-and-id-mapping" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Name and ID mapping"><!--[--><!--]--> Name and ID mapping <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/binary_mode.html#read-data" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Read data"><!--[--><!--]--> Read data <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/binary_mode.html#update-data" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Update data"><!--[--><!--]--> Update data <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/binary_mode.html#create-data" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Create data"><!--[--><!--]--> Create data <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/binary_mode.html#delete-data" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Delete data"><!--[--><!--]--> Delete data <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/binary_mode.html#execute-function" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Execute function"><!--[--><!--]--> Execute function <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/binary_mode.html#reporting" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Reporting"><!--[--><!--]--> Reporting <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Transports</p><ul class=""><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/transports/serial.html" class="nav-link sidebar-item" aria-label="Serial"><!--[--><!--]--> Serial <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/transports/websocket.html" class="nav-link sidebar-item" aria-label="WebSocket"><!--[--><!--]--> WebSocket <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/transports/can.html" class="nav-link sidebar-item" aria-label="CAN"><!--[--><!--]--> CAN <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/transports/bluetooth.html" class="nav-link sidebar-item" aria-label="BLE"><!--[--><!--]--> BLE <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Mappings</p><ul class=""><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/mappings/mqtt.html" class="nav-link sidebar-item" aria-label="MQTT"><!--[--><!--]--> MQTT <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/mappings/coap.html" class="nav-link sidebar-item" aria-label="CoAP"><!--[--><!--]--> CoAP <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/mappings/lorawan.html" class="nav-link sidebar-item" aria-label="LoRaWAN"><!--[--><!--]--> LoRaWAN <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Annex</p><ul class=""><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/annex/a_existing_solutions.html" class="nav-link sidebar-item" aria-label="Annex A: Existing Solutions"><!--[--><!--]--> Annex A: Existing Solutions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-multi-frame-report-rework/spec/v0.6/annex/b_tools.html" class="nav-link sidebar-item" aria-label="Annex B: Tools"><!--[--><!--]--> Annex B: Tools <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="binary-mode" tabindex="-1"><a class="header-anchor" href="#binary-mode" aria-hidden="true">#</a> Binary Mode</h1><h2 id="overview" tabindex="-1"><a class="header-anchor" href="#overview" aria-hidden="true">#</a> Overview</h2><p>In the binary mode, the data is encoded using the CBOR format. The data structure is the same as in text mode, but numeric object IDs are used as identifiers by default instead of the object names.</p><p>The length of the entire request or response is not encoded in the ThingSet protocol, but can be determined from the CBOR format. Packet length as well as checksums should be encoded in lower layer protocols. It is assumed that the parser always receives a complete request.</p><p>The <strong>target</strong> of the binary mode is to work with as little payload data as possible. Hence, published reports only contain values and the corresponding IDs or names are only sent once at startup or can be requested manually later.</p><p>The <strong>main challenge</strong> is to still be fully discoverable via the binary mode without requiring previous knowledge of the data exposed by the device.</p><p>Requests in binary mode can either use data object IDs or names / paths. IDs offer the most compact form with least wire payload, but require some processing on the application side. For requests through gateways (using absolute paths) endpoints must be specified as strings, as numeric IDs are only unique per node.</p><h3 id="requests" tabindex="-1"><a class="header-anchor" href="#requests" aria-hidden="true">#</a> Requests</h3><p>Each request message consists of a first byte as the request method identifier, a path or ID specifying the endpoint of the request and CBOR data as payload (if applicable).</p><pre><code>bin-request = bin-get / bin-fetch / bin-update / bin-create / bin-delete / bin-exec

bin-get    = %x01 endpoint

bin-fetch  = %x05 endpoint ( cbor-array   ; IDs or names of requested data
                           / %xF6 )       ; CBOR null: request array of all
                                          ; IDs or names behind endpoint

bin-update = %x07 endpoint cbor-map

bin-delete = %x04 endpoint cbor-value

bin-create = %x06 endpoint cbor-value

bin-exec   = %x02 endpoint cbor-array

endpoint   = path            ; CBOR string: path same as text mode
           / parent-id       ; CBOR uint: parent object ID instead of path
           / parent-id-index ; CBOR array: parent object ID, record index
</code></pre><h3 id="response" tabindex="-1"><a class="header-anchor" href="#response" aria-hidden="true">#</a> Response</h3><p>Responses in binary mode start with the error/status code as specified before, followed by the data if applicable.</p><pre><code>bin-response = %x80-FF                ; response code
               ( node-id / %xF6 )     ; CBOR string with node ID or null
               ( cbor-data / %xF6 )   ; CBOR payload data or null
</code></pre><h3 id="report" tabindex="-1"><a class="header-anchor" href="#report" aria-hidden="true">#</a> Report</h3><p>Binary reports follow the same concept as in text mode.</p><pre><code>bin-report = %x1F endpoint cbor-map    ; map containing object IDs and values
</code></pre><h2 id="name-and-id-mapping" tabindex="-1"><a class="header-anchor" href="#name-and-id-mapping" aria-hidden="true">#</a> Name and ID mapping</h2><p>The examples in this chapter are based on the same data structure as introduced in the <a href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/appl_data_structure.html#grouped-layout" class="">Data Structure chapter</a>, but each object is identified by the ID stated in the comment.</p><p>The firmware developer is free to choose the IDs.</p><p>In contrast to the text mode, the binary mode has the special endpoints <code>&quot;_Ids&quot;</code> (ID <code>0x16</code>) and <code>&quot;_Paths&quot;</code> (ID <code>0x17</code>) that allow to retrieve the path for a given ID or vice versa using a <code>FETCH</code> request.</p><p><strong>Example 1:</strong> Request IDs of object paths <code>&quot;Bat/rVoltage_V&quot;</code> and <code>&quot;Bat/rCurrent_A&quot;</code></p><pre><code>Request:
05                                      # FETCH request
   16                                   # CBOR uint: 0x17 (_Ids endpoint)
   82                                   # CBOR array (2 elements)
      6E 4261742F72566F6C746167655F56   # CBOR string: &quot;Bat/rVoltage_V&quot;
      6E 4261742F7243757272656E745F41   # CBOR string: &quot;Bat/rCurrent_A&quot;

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   82                                   # CBOR array (2 elements)
      18 40                             # CBOR uint: 0x40 (object ID)
      18 41                             # CBOR uint: 0x41 (object ID)
</code></pre><p><strong>Example 2:</strong> Request paths of object IDs <code>0x40</code> and <code>0x41</code></p><pre><code>Request:
05                                      # FETCH request
   17                                   # CBOR uint: 0x17 (_Paths endpoint)
   82                                   # CBOR array (2 elements)
      18 40                             # CBOR uint: 0x40 (object ID)
      18 41                             # CBOR uint: 0x41 (object ID)

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   82                                   # CBOR array (2 elements)
      6E 4261742F72566F6C746167655F56   # CBOR string: &quot;Bat/rVoltage_V&quot;
      6E 4261742F7243757272656E745F41   # CBOR string: &quot;Bat/rCurrent_A&quot;
</code></pre><p><strong>Example 3:</strong> Request paths of object ID <code>0x70</code> (part of a record)</p><pre><code>Request:
05                                      # FETCH request
   17                                   # CBOR uint: 0x17 (_Paths endpoint)
   81                                   # CBOR array (1 element)
      18 70                             # CBOR uint: 0x40 (object ID)

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   81                                   # CBOR array (1 element)
      6F 4572726F724D656D6F72792F745F73 # CBOR string: &quot;ErrorMemory/t_s&quot;
</code></pre><h2 id="read-data" tabindex="-1"><a class="header-anchor" href="#read-data" aria-hidden="true">#</a> Read data</h2><p>Similar to the text mode, the binary variants of the GET and FETCH functions also allow to read one or more data objects. The objects are identified by their parent object (endpoint of a path) and their IDs or their names.</p><p>With the GET function it is possible to retrieve all child objects of a resource as a map of key/value pairs.</p><p>The FETCH function can retrieve a specified subset of child item values. In addition to that, it can be used for device discovery, as it can list all childs of an object. Depending on the computing power and the network bandwidth, the childs can be requested as IDs or names.</p><h3 id="using-data-object-names" tabindex="-1"><a class="header-anchor" href="#using-data-object-names" aria-hidden="true">#</a> Using data object names</h3><p>If a path (string containing names) is used to specify an endpoint, also names are used instead of IDs in the returned results.</p><p><strong>Example 1:</strong> Retrieve all data of <code>Bat</code> path (names + values)</p><pre><code>Request:
01                                          # GET
   63 426174                                # CBOR string: &quot;Bat&quot;

Response:
85                                          # Content.
   F6                                       # CBOR null (direct connection)
   A3                                       # CBOR map (3 elements)
      6A 72566F6C746167655F56               # CBOR string: &quot;rVoltage_V&quot;
      FA 414E6666                           # CBOR float: 12.9
      6A 7243757272656E745F41               # CBOR string: &quot;rCurrent_A&quot;
      FA C048F5C3                           # CBOR float: -3.14
      70 73546172676574566F6C746167655F56   # CBOR string: &quot;sTargetVoltage_V&quot;
      FA 41666666                           # CBOR float: 14.4
</code></pre><p><strong>Example 2:</strong> Discover all child object names of the root object</p><pre><code>Request:
05                                      # FETCH
   60                                   # CBOR empty string (root object)
   F6                                   # CBOR null for discovery

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   8C                                   # CBOR array (12 elements)
      63 745F73                         # CBOR string: &quot;t_s&quot;
      67 704E6F64654944                 # CBOR string: &quot;pNodeID&quot;
       ...
</code></pre><p><strong>Example 3:</strong> Retrieve value for single data item <code>Bat/rVoltage_V</code></p><pre><code>Request:
05                                      # FETCH
   63 426174                            # CBOR string: &quot;Bat&quot; (path)
   6A 72566F6C746167655F56              # CBOR string: &quot;rVoltage_V&quot; (object name)

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   FA 414E6666                          # CBOR float: 12.9
</code></pre><h3 id="using-data-object-ids" tabindex="-1"><a class="header-anchor" href="#using-data-object-ids" aria-hidden="true">#</a> Using data object IDs</h3><p><strong>Example 4:</strong> Retrieve all data of meas path (IDs + values)</p><pre><code>Request:
01                                      # GET
   02                                   # CBOR uint: 0x02

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   A3                                   # CBOR map (3 elements)
      18 40                             # CBOR uint: 0x40
      FA 414E6666                       # CBOR float: 12.9
      18 41                             # CBOR uint: 0x41
      FA C048F5C3                       # CBOR float: -3.14
      18 42                             # CBOR uint: 0x42
      FA 41666666                       # CBOR float: 14.4
</code></pre><p><strong>Example 5:</strong> Discover all child object IDs of the root object</p><pre><code>Request:
05                                      # FETCH
   00                                   # CBOR uint: 0x00 (root object)
   F6                                   # CBOR null for discovery

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   8C                                   # CBOR array (12 elements)
      01                                # CBOR uint: 0x10
      18 1D                             # CBOR uint: 0x1D
       ...
</code></pre><p><strong>Example 6:</strong> Retrieve value for single data item <code>Bat/rVoltage_V</code> with ID <code>0x40</code></p><pre><code>Request:
01                                      # GET
   18 40                                # CBOR uint: 0x40 (object ID)

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   FA 414E6666                          # CBOR float: 12.9
</code></pre><p><strong>Example 7:</strong> Retrieve multiple data items:</p><p>For fetching multiple data items, the IDs are provided in the array as the second argument. Even though the IDs already describe the data item unambiguously, the endpoint must still be the correct group/parent ID.</p><pre><code>Request:
05                                      # FETCH
   02                                   # CBOR uint: 0x02 (parent ID)
   82                                   # CBOR array (2 elements)
      18 40                             # CBOR uint: 0x40 (object ID)
      18 41                             # CBOR uint: 0x41 (object ID)

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   82                                   # CBOR array (2 elements)
      FA 414E6666                       # CBOR float: 12.9
      FA C048F5C3                       # CBOR float: -3.14
</code></pre><p><strong>Example 8:</strong> Retrieve number of records in <code>ErrorMemory_100</code></p><p>If the endpoint is an array of records, a GET request returns all records or the number of records if not all data can be fit into the response (most likely the case).</p><pre><code>Request:
01                                      # GET
   08                                   # CBOR uint: 0x08 (records ID)

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   02                                   # CBOR uint: 0x02 (2 elements)
</code></pre><p><strong>Example 9:</strong> Retrieve first record in <code>ErrorMemory_100</code></p><p>Records are always returned as key/value maps, similar to GET requests for groups.</p><pre><code>Request:
01                                      # GET
   82                                   # CBOR array (2 elements)
      08                                # CBOR uint: 0x08 (parent ID)
      00                                # CBOR uint: 0x00 (index)

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   A2                                   # CBOR map (2 elements)
      18 70                             # CBOR uint: 0x70 (object ID)
      1A 1B7561E0                       # CBOR uint: 460677600
      18 71                             # CBOR uint: 0x71 (object ID)
      19 0100                           # CBOR uint: 256
</code></pre><p><strong>Example 10:</strong> Attempt to retrieve a single item from a record in <code>ErrorMemory_100</code></p><p>As there can be multiple instances of the same record sharing the same IDs for their items, it&#39;s not possible to query a record item by ID.</p><pre><code>Request:
05                                      # FETCH
   00                                   # CBOR uint: 0x00 (root ID)
   82                                   # CBOR array (2 elements)
      18 70                             # CBOR uint: 0x70 (object ID)

Response:
A4                                      # Not Found.
   F6                                   # CBOR null (direct connection)
   F6                                   # CBOR null (no payload)
</code></pre><h2 id="update-data" tabindex="-1"><a class="header-anchor" href="#update-data" aria-hidden="true">#</a> Update data</h2><p>Requests to overwrite the values of data items.</p><p>The device must support an update request using the same CBOR data type as used in the response of a GET or FETCH request for the given objects. Optionally, the device may also accept different data types (e.g. float32 instead of int) and convert the data internally.</p><p>If the data type is not supported, an error status code (<code>0xAF</code>) is responded.</p><p><strong>Example 1:</strong> Disable load output</p><pre><code>Request:
07                                      # UPDATE
   04                                   # CBOR uint: 0x04 (parent ID)
   A1                                   # CBOR map (1 element)
      18 60                             # CBOR uint: 0x60 (object ID)
      F4                                # CBOR data: false

Response:
84                                      # Changed.
   F6                                   # CBOR null (direct connection)
   F6                                   # CBOR null (no payload)
</code></pre><p><strong>Example 2:</strong> Attempt to write read-only measurement values</p><pre><code>Request:
07                                      # UPDATE
   02                                   # CBOR uint: 0x02
   A1                                   # CBOR map (1 element)
      18 40                             # CBOR uint: 0x40
      FA 41633333                       # CBOR float32: 14.2

Response:
A3                                      # Forbidden.
   F6                                   # CBOR null (direct connection)
   F6                                   # CBOR null (no payload)
</code></pre><h2 id="create-data" tabindex="-1"><a class="header-anchor" href="#create-data" aria-hidden="true">#</a> Create data</h2><p>Appends new data to a data object in a similar way as in the text mode.</p><p><strong>Example 1:</strong> Add item with ID <code>0x41</code> (<code>Bat/rCurrent_A</code>) to the live metrics subset <code>mLive_</code></p><pre><code>Request:
06                                      # CREATE
   07                                   # CBOR uint: 0x07 (subset object ID)
   18 41                                # CBOR uint: 0x41

Response:
81                                      # Created.
   F6                                   # CBOR null (direct connection)
   F6                                   # CBOR null (no payload)
</code></pre><h2 id="delete-data" tabindex="-1"><a class="header-anchor" href="#delete-data" aria-hidden="true">#</a> Delete data</h2><p>Removes data from an object of array type.</p><p><strong>Example 1:</strong> Delete item with ID <code>0x61</code> (<code>Load/rPower_W</code>) from live metrics subset</p><pre><code>Request:
04                                      # DELETE
   07                                   # CBOR uint: 0x07 (subset object ID)
   18 61                                # CBOR uint: 0x61

Response:
82                                      # Deleted.
   F6                                   # CBOR null (direct connection)
   F6                                   # CBOR null (no payload)
</code></pre><h2 id="execute-function" tabindex="-1"><a class="header-anchor" href="#execute-function" aria-hidden="true">#</a> Execute function</h2><p>For execution of a function, the EXEC request is used.</p><p><strong>Example 1:</strong> Reset the device</p><pre><code>Request:
02                                      # EXEC
   18 34                                # CBOR uint: 0x34 (object ID)
   80                                   # CBOR empty array

Response:
84                                      # Changed.
   F6                                   # CBOR null (direct connection)
   F6                                   # CBOR null (no payload)
</code></pre><p>Note that the endpoint is the object of the executable function itself. Data can be passed to the called function as the second parameter, but the <code>Device/xReset</code> function does not require any parameters, so it receives an empty array.</p><p>Functions may return payload data, in which case the response is <code>0x85</code> followed by the content.</p><h2 id="reporting" tabindex="-1"><a class="header-anchor" href="#reporting" aria-hidden="true">#</a> Reporting</h2><p>In contrast to text mode, reporting in binary mode only contain the values and not the corresponding names or IDs in order to reduce payload data as much as possible.</p><p><strong>Example 1:</strong> A report containing the <code>mLive_</code> subset, sent out by the device every 10 seconds</p><pre><code>1F
   07                                   # CBOR uint: 0x07 (subset object ID)
   85                                   # CBOR array (5 elements)
      1A 1B7561E0                       # CBOR uint: 460677600
      FA 414E6666                       # CBOR float: 12.9
      FA C048F5C3                       # CBOR float: -3.14
      FA 42C10000                       # CBOR float: 96.5
      FA 43090000                       # CBOR float: 137.0
</code></pre><p>The corresponding IDs can be retrieved with a fetch request.</p><p><strong>Example 2:</strong> Retrieve corresponding IDs for a received report.</p><pre><code>Request:
05                                      # FETCH
   07                                   # CBOR uint: 0x07 (object ID)
   F6                                   # CBOR null for discovery

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   85                                   # CBOR array (5 elements)
      10                                # CBOR uint: 0x10 (object ID)
      18 40                             # CBOR uint: 0x40 (object ID)
      18 41                             # CBOR uint: 0x41 (object ID)
      18 51                             # CBOR uint: 0x51 (object ID)
      18 61                             # CBOR uint: 0x61 (object ID)
</code></pre><p>If the name of the object is supplied instead of the ID, paths are returned in the response.</p><p><strong>Example 3:</strong> Retrieve corresponding names for a received report.</p><pre><code>Request:
05                                      # FETCH
   66 6D4C6976655F                      # CBOR string: &quot;mLive_&quot; (object path)
   F6                                   # CBOR null for discovery

Response:
85                                      # Content.
   F6                                   # CBOR null (direct connection)
   84                                   # CBOR array (4 elements)
      63 745F73                         # CBOR string: &quot;t_s&quot; (object path)
      6E 4261742F72566F6C746167655F56   # CBOR string: &quot;Bat/rVoltage_V&quot; (object path)
      6E 4261742F7243757272656E745F41   # CBOR string: &quot;Bat/rCurrent_A&quot; (object path)
      6E 536F6C61722F72506F7765725F57   # CBOR string: &quot;Solar/rPower_W&quot; (object path)
      6D 4C6F61642F72506F7765725F57     # CBOR string: &quot;Load/rPower_W&quot; (object path)
</code></pre><p>If not all child nodes of one path fit into a single report (e.g. because the sizes of CAN and LoRa frames are limited to a few tens of bytes) it can be split. However, in this case the payload must contain the IDs together with the values, as otherwise the values cannot be mapped to the IDs anymore. The endpoint must be the root ID <code>0x00</code>.</p><p><strong>Example 4:</strong> A report containing a part of the <code>mLive_</code> subset.</p><pre><code>1F
   00                                   # CBOR uint: 0x00 (root ID)
   A2                                   # CBOR map (2 elements)
      18 40                             # CBOR uint: 0x40 (object ID)
      FA 414E6666                       # CBOR float: 12.9
      18 41                             # CBOR uint: 0x41 (object ID)
      FA C048F5C3                       # CBOR float: -3.14
</code></pre><p>Reports can also contain record items. If IDs are used instead of path strings, a two-element array is used to specify ID and record index (similar to GET requests).</p><p><strong>Example 5:</strong> A report containing the first record in <code>ErrorMemory_100</code></p><pre><code>1F
   82                                   # CBOR array (2 elements)
      08                                # CBOR uint: 0x08 (parent ID)
      00                                # CBOR uint: 0x00 (index)
   A2                                   # CBOR map (2 elements)
      18 70                             # CBOR uint: 0x70 (object ID)
      1A 1B7561E0                       # CBOR uint: 460677600
      18 71                             # CBOR uint: 0x71 (object ID)
      19 0100                           # CBOR uint: 256
</code></pre><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/ThingSet/thingset.github.io/edit/can-multi-frame-report-rework/docs/spec/v0.6/protocol/binary_mode.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">3/6/2024, 5:26:34 PM</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/branch/can-multi-frame-report-rework/spec/v0.6/protocol/text_mode.html" class="nav-link" aria-label="Text Mode"><!--[--><!--]--> Text Mode <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><div class="footer"><span style="padding:5px;"><a href="https://github.com/ThingSet"><img src="/images/github-logo.svg" height="14"> GitHub</a></span> | <span style="padding:5px;">Developed by Libre Solar Technologies GmbH</span> | <span style="padding:5px;"><a href="/contact.html">Contact / Impressum</a></span></div><!--]--><!----><!--]--></div>
    <script src="/branch/can-multi-frame-report-rework/assets/js/runtime~app.a8fe06e0.js" defer></script><script src="/branch/can-multi-frame-report-rework/assets/js/9296.89757b8c.js" defer></script><script src="/branch/can-multi-frame-report-rework/assets/js/app.0d5cf58c.js" defer></script>
  </body>
</html>
